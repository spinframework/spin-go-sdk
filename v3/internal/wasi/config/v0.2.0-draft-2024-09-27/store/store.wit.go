// Code generated by wit-bindgen-go. DO NOT EDIT.

// Package store represents the imported interface "wasi:config/store@0.2.0-draft-2024-09-27".
package store

import (
	"go.bytecodealliance.org/cm"
)

// Error represents the variant "wasi:config/store@0.2.0-draft-2024-09-27#error".
//
// An error type that encapsulates the different errors that can occur fetching configuration
// values.
//
//	variant error {
//		upstream(string),
//		io(string),
//	}
type Error cm.Variant[uint8, string, string]

// ErrorUpstream returns a [Error] of case "upstream".
//
// This indicates an error from an "upstream" config source.
// As this could be almost _anything_ (such as Vault, Kubernetes ConfigMaps, KeyValue
// buckets, etc),
// the error message is a string.
func ErrorUpstream(data string) Error {
	return cm.New[Error](0, data)
}

// Upstream returns a non-nil *[string] if [Error] represents the variant case "upstream".
func (self *Error) Upstream() *string {
	return cm.Case[string](self, 0)
}

// ErrorIO returns a [Error] of case "io".
//
// This indicates an error from an I/O operation.
// As this could be almost _anything_ (such as a file read, network connection, etc),
// the error message is a string.
// Depending on how this ends up being consumed,
// we may consider moving this to use the `wasi:io/error` type instead.
// For simplicity right now in supporting multiple implementations, it is being left
// as a string.
func ErrorIO(data string) Error {
	return cm.New[Error](1, data)
}

// IO returns a non-nil *[string] if [Error] represents the variant case "io".
func (self *Error) IO() *string {
	return cm.Case[string](self, 1)
}

var _ErrorStrings = [2]string{
	"upstream",
	"io",
}

// String implements [fmt.Stringer], returning the variant case name of v.
func (v Error) String() string {
	return _ErrorStrings[v.Tag()]
}

// Get represents the imported function "get".
//
// Gets a configuration value of type `string` associated with the `key`.
//
// The value is returned as an `option<string>`. If the key is not found,
// `Ok(none)` is returned. If an error occurs, an `Err(error)` is returned.
//
//	get: func(key: string) -> result<option<string>, error>
//
//go:nosplit
func Get(key string) (result cm.Result[OptionStringShape, cm.Option[string], Error]) {
	key0, key1 := cm.LowerString(key)
	wasmimport_Get((*uint8)(key0), (uint32)(key1), &result)
	return
}

// GetAll represents the imported function "get-all".
//
// Gets a list of configuration key-value pairs of type `string`.
//
// If an error occurs, an `Err(error)` is returned.
//
//	get-all: func() -> result<list<tuple<string, string>>, error>
//
//go:nosplit
func GetAll() (result cm.Result[ErrorShape, cm.List[[2]string], Error]) {
	wasmimport_GetAll(&result)
	return
}
